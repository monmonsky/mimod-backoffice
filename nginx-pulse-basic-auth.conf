# Setup HTTP Basic Auth untuk Laravel Pulse
#
# Step 1: Buat password file
# sudo apt-get install apache2-utils
# sudo htpasswd -c /etc/nginx/.htpasswd-pulse admin
# (masukkan password ketika diminta)
#
# Step 2: Tambahkan config ini ke nginx virtual host

# ---- Laravel Pulse Dashboard dengan Basic Auth ----
location ^~ /pulse {
    auth_basic "Pulse Monitoring - Login Required";
    auth_basic_user_file /etc/nginx/.htpasswd-pulse;

    try_files $uri $uri/ /index.php?$query_string;
}

# ---- Livewire (required for Pulse real-time updates) ----
location ^~ /livewire {
    auth_basic "Pulse Monitoring - Login Required";
    auth_basic_user_file /etc/nginx/.htpasswd-pulse;

    try_files $uri $uri/ /index.php?$query_string;
}

# ---- Pulse vendor assets (CSS/JS) ----
location ^~ /vendor/pulse {
    auth_basic "Pulse Monitoring - Login Required";
    auth_basic_user_file /etc/nginx/.htpasswd-pulse;

    try_files $uri $uri/ =404;
}
